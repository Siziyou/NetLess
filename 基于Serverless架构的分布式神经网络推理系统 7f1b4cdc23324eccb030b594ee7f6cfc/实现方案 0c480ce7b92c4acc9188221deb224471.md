# 实现方案

最终目标为：实现对深度学习模型的自动拆解，根据模型的结构，自动构建对应的异步工作流，整个环节实现完全的自动化，最终以函数的形式部署在severless中。

分步方案：

| 步骤 | 描述 |
| --- | --- |
| 1、拆模型 | A、拆解粒度：Sequential为单位，前置输入层和后置输出层分别单独合并形成两个模型。 |
|  | B、拆解方式：循环拆解，将子模型静态保存为文件，分发到各个文件夹，以便下一环节打包镜像。同时生成结构信息备用。 |
| 2、装配函数 | A、函数模板：使用severless的pytorch模板。 |
|  | B、装配方式：利用字符串处理，自动化生成代码。 |
| 3、组织函数 | A、组织工具：fasssync（弃用原因：太过朴素，需要很大的开发、配置代价）、faas-flow（插件） |
|  | B、组织方案：以异步工作流的方式将函数链接起来，根据步骤1中的结构信息，生成对应的配置文件。 |
| 4、部署 | A、部署工具：自行实现一批脚本，使用base64编码来处理图片的传输 |
|  | B、部署结果：保证精度的前提下，能够快速返回用户提交的图片的分类结果。期间监视函数的执行情况，寻找需要优化的地方。 |
| 5、实验与测试 | A、实验目标：比较不同规模的模型的执行延迟、开销。 |
|  | B、实验模型：ResNet系列模型，方便进行模型纵向（规模不断增大）的比较。 |
- [ ]  拆解模型为子模型，保存为文件，以便下一步打包镜像
- [ ]  利用字符串处理，自动化生成代码，装配函数
- [ ]  将函数链接起来，生成对应的配置文件，以异步工作流的方式组织函数
- [ ]  自行实现一批脚本，部署函数
- [ ]  比较不同规模的模型的执行延迟、开销